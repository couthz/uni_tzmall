(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-orderList-orderList"],{"31c0":function(t,e,a){var n=a("adac");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("4f06").default;o("186ed7eb",n,!0,{sourceMap:!1,shadowMode:!1})},4428:function(t,e,a){"use strict";e["a"]=function(t){(t.options.wxs||(t.options.wxs={}))["wxs"]=function(t){return t.exports={toPrice:function(t){return t||(t=0),t.toFixed(2)},parsePrice:function(t){return t||(t=0),t.toFixed(2).split(".")},array_contain:function(t,e){for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1},props_contain:function(t,e,a,n,o){var i="";e[a]=n;for(var r=0;r<o.length;r++)i+=o[r]+":"+e[o[r]]+";";i=i.substring(0,i.length-1);for(var s=!1,d=0;d<t.length;d++)if(i==t[d]){s=!0;break}return s},parseDiscount:function(t){return 0==t?"满额减":1==t?"满件减":2==t?"满额折":3==t?"满件折":""},parseDiscountMsg:function(t,e,a){return 0==t?"购满"+e+"元减"+a+"元":1==t?"购满"+e+"件减"+a+"元":2==t?"购满"+e+"元打"+a+"折":3==t?"购满"+e+"件打"+a+"折":""}},t.exports}({exports:{}})}},"639e":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"order-tit"},[a("v-uni-text",{class:0==t.sts?"on":"",attrs:{"data-sts":"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("全部")]),a("v-uni-text",{class:100==t.sts?"on":"",attrs:{"data-sts":"100"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("待支付")]),a("v-uni-text",{class:101==t.sts?"on":"",attrs:{"data-sts":"101"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("待发货")]),a("v-uni-text",{class:102==t.sts?"on":"",attrs:{"data-sts":"102"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("待收货")]),a("v-uni-text",{class:103==t.sts?"on":"",attrs:{"data-sts":"103"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("待评价")])],1),a("v-uni-view",{staticClass:"main"},[0===t.list.length?a("v-uni-view",{staticClass:"empty"},[t._v("还没有任何相关订单")]):t._e(),t._l(t.list,(function(e,n){return[0===e.deleteStatus?a("v-uni-view",{key:n+"_0",staticClass:"prod-item"},[a("v-uni-view",{staticClass:"order-num"},[a("v-uni-text",{staticClass:"order-num-title"},[t._v("订单编号："+t._s(e.orderNumber))]),a("v-uni-view",{staticClass:"order-state"},[a("v-uni-text",{staticClass:"order-sts red"},[t._v(t._s(100==e.status?"待支付":101==e.status?"待发货":102==e.status?"待收货":105==e.status?"部分发货":106==e.status?"支付处理中":200==e.status?"交易关闭":"交易成功"))]),104==e.status||200==e.status?a("v-uni-view",{staticClass:"clear-btn"},[a("v-uni-image",{staticClass:"clear-list-btn",attrs:{src:"/static/images/icon/clear-his.png","data-ordernum":e.orderNumber},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delOrderList.apply(void 0,arguments)}}})],1):t._e()],1)],1),1==e.orderItems.length?[t._l(e.orderItems,(function(o,i){return[a("v-uni-view",[a("v-uni-view",{staticClass:"item-cont",attrs:{"data-ordernum":e.orderNumber,"data-listindex":n},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toOrderDetailPage.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"prod-pic"},[a("v-uni-image",{attrs:{src:o.pic}})],1),a("v-uni-view",{staticClass:"prod-info"},[a("v-uni-view",{staticClass:"prodname"},[t._v(t._s(o.prodName))]),a("v-uni-view",{staticClass:"prod-info-cont"},[t._v(t._s(o.skuName))]),a("v-uni-view",{staticClass:"price-nums"},[a("v-uni-text",{staticClass:"prodprice"},[a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(o.price))])],1),a("v-uni-text",{staticClass:"prodcount"},[t._v("x"+t._s(o.itemCount))])],1)],1)],1)],1)]}))]:[a("v-uni-view",{staticClass:"item-cont",attrs:{"data-ordernum":e.orderNumber},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toOrderDetailPage.apply(void 0,arguments)}}},[a("v-uni-scroll-view",{staticClass:"categories",attrs:{"scroll-x":"true","scroll-left":"0","scroll-with-animation":"false"}},[t._l(e.orderItems,(function(t,e){return[a("v-uni-view",{key:e+"_0",staticClass:"prod-pic"},[a("v-uni-image",{attrs:{src:t.pic}})],1)]}))],2)],1)],a("v-uni-view",{staticClass:"total-num"},[a("v-uni-text",{staticClass:"prodcount"},[t._v("共1件商品")]),a("v-uni-view",{staticClass:"prodprice"},[t._v("合计："),a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(e.totalPay))])],1)],1),a("v-uni-view",{staticClass:"prod-foot"},[a("v-uni-view",{staticClass:"btn"},[100==e.status?a("v-uni-text",{staticClass:"button",attrs:{"data-ordernum":e.orderNumber,"data-index":n,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onCancelOrder.apply(void 0,arguments)}}},[t._v("取消订单")]):t._e(),100==e.status?a("v-uni-text",{staticClass:"button warn",attrs:{"data-ordernum":e.orderNumber,"data-index":n,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.normalPay.apply(void 0,arguments)}}},[t._v("付款")]):t._e(),e.status>=102&&e.status<=104?a("v-uni-text",{staticClass:"button",attrs:{"data-ordernum":e.orderNumber,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDeliveryPage.apply(void 0,arguments)}}},[t._v("查看物流")]):t._e(),102==e.status?a("v-uni-text",{staticClass:"button warn",attrs:{"data-ordernum":e.orderNumber,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirmReceive.apply(void 0,arguments)}}},[t._v("确认收货")]):t._e()],1)],1)],2):t._e()]}))],2)],1)},o=[]},"74ce":function(t,e,a){"use strict";a.r(e);var n=a("639e"),o=a("b6b3");for(var i in o)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(i);a("aac6");var r=a("f0c5"),s=a("4428"),d=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"12b41d92",null,!1,n["a"],void 0);"function"===typeof s["a"]&&Object(s["a"])(d),e["default"]=d.exports},a10b:function(t,e,a){var n=a("ef65"),o=function(t,e){uni.showLoading({mask:!0});var a={url:"/order/pay/orderFinishPay",method:"POST",data:t,callBack:function(t){uni.hideLoading(),e.success()},errCallBack:function(){uni.hideLoading(),uni.showToast({title:"支付状态更新错误,请联系客服",icon:"none"})}};n.request(a)};e.normalPay=function(t,e){uni.showLoading({mask:!0});var a={url:"/order/pay/normalPay",method:"POST",data:{orderNumber:t},callBack:function(a){uni.hideLoading(),o(t,e),uni.showToast({title:"模拟支付成功"})}};n.request(a)}},aac6:function(t,e,a){"use strict";var n=a("31c0"),o=a.n(n);o.a},adac:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'/* pages/orderList/orderList.wxss */uni-page-body[data-v-12b41d92]{background-color:#f4f4f4;color:#333}body.?%PAGE?%[data-v-12b41d92]{background-color:#f4f4f4}\n\n/* 头部菜单 */.order-tit[data-v-12b41d92]{position:fixed;top:0;display:flex;justify-content:space-around;z-index:999;width:100%;height:%?100?%;line-height:%?100?%;background-color:#fff;border-bottom:%?2?% solid #f4f4f4}.order-tit uni-text[data-v-12b41d92]{display:block;font-size:%?28?%;color:999;width:%?100?%;text-align:center}.order-tit uni-text.on[data-v-12b41d92]{border-bottom:%?4?% solid #ec6817;color:#ec6817}\n\n/*  end 头部菜单 */.main[data-v-12b41d92]{margin-top:%?100?%}\n\n/* 商品列表 */.prod-item[data-v-12b41d92]{background-color:#fff;margin-top:%?15?%;font-size:%?28?%}.prod-item .item-cont .prod-pic uni-image[data-v-12b41d92]{width:%?180?%;height:%?180?%}.prod-item .order-num[data-v-12b41d92]{padding:%?20?% %?30?%;display:flex;justify-content:space-between;font-size:%?28?%}.order-num-title[data-v-12b41d92]{color:#999}.order-state[data-v-12b41d92]{display:flex;align-items:center;font-size:%?24?%}.prod-item .item-cont .categories[data-v-12b41d92]{white-space:nowrap}.prod-item .item-cont[data-v-12b41d92]{display:flex;align-items:center;padding:%?20?% %?30?%;border-radius:%?10?%;display:-webkit-flex;display:-webkit-box;display:-moz-box;display:-ms-flexbox;background:#fafafa}.prod-item .order-num .clear-btn[data-v-12b41d92]{width:%?32?%;height:%?32?%;font-size:0;vertical-align:top;margin-left:%?42?%;position:relative}.prod-item .order-num .clear-btn[data-v-12b41d92]::after{content:" ";display:block;position:absolute;left:-10px;top:%?0?%;width:1px;height:%?32?%;background:#ddd}.prod-item .order-num .clear-btn .clear-list-btn[data-v-12b41d92]{width:100%;height:100%;vertical-align:middle}.prod-item .item-cont .prod-pic[data-v-12b41d92]{font-size:0;display:inline-block;width:%?160?%;height:%?160?%;overflow:hidden;background:#fff;margin-right:%?16?%}.prod-item .item-cont .prod-pic uni-image[data-v-12b41d92]{width:100%;height:100%}.prod-item .item-cont .prod-info[data-v-12b41d92]{margin-left:%?10?%;font-size:%?28?%;width:100%;position:relative;height:%?160?%;-webkit-flex:1;-ms-flex:1;-webkit-box-flex:1;-moz-box-flex:1;flex:1}.prod-item .item-cont .prod-info .prodname[data-v-12b41d92]{font-size:%?28?%;line-height:%?36?%;max-height:%?86?%;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis;word-break:break-all}.prod-item .item-cont .prod-info .prod-info-cont[data-v-12b41d92]{color:#999;line-height:%?40?%;margin-top:%?10?%;font-size:%?22?%;overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;text-overflow:ellipsis;word-break:break-all}.prod-item .total-num[data-v-12b41d92]{text-align:right;padding:%?20?% %?30?%;font-size:%?28?%}.prod-item .price-nums .prodprice[data-v-12b41d92]{color:#333;position:absolute;bottom:0}.prod-item .price-nums .prodcount[data-v-12b41d92]{position:absolute;bottom:%?5?%;right:0;color:#999;font-family:verdana}.prod-item .total-num .prodprice[data-v-12b41d92]{display:inline-block;color:#333}.prod-item .total-num .prodcount[data-v-12b41d92]{margin-right:%?20?%}.prod-item .prod-foot[data-v-12b41d92]{\n  /* padding: 20rpx 30rpx; */border-top:%?2?% solid #e6e6e6}.prod-item .prod-foot .total[data-v-12b41d92]{font-size:%?25?%;margin-bottom:%?20?%;padding-bottom:%?20?%;border-bottom:%?2?% solid #e9eaec}.prod-item .prod-foot .btn[data-v-12b41d92]{display:flex;align-items:center;justify-content:flex-end}.other-button-hover[data-v-12b41d92]{background-color:#00f}.button-hover[data-v-12b41d92]{background-color:red}\n\n/** 添加自定义button点击态样式类**/.button-hover[data-v-12b41d92]{background-color:#00f}.button[data-v-12b41d92]{margin-top:%?20?%;margin-bottom:%?20?%;margin-left:10px;font-size:%?26?%;background:#fff;padding:%?10?% %?30?%;border-radius:%?80?%;border:%?2?% solid #e1e1e1}.button[data-v-12b41d92]:last-child{margin-right:%?10?%}.button.warn[data-v-12b41d92]{color:#ec6817;border-color:#ec6817}\n\n/* end 商品列表 */.empty[data-v-12b41d92]{font-size:%?24?%;margin-top:%?100?%;text-align:center;color:#999;height:%?300?%;line-height:%?300?%}\n\n/* 根据状态显示不同的颜色 */.order-state .order-sts.red[data-v-12b41d92]{color:#ec6817}.order-state .order-sts.gray[data-v-12b41d92]{color:#999}',""]),t.exports=e},b6b3:function(t,e,a){"use strict";a.r(e);var n=a("cbd9"),o=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(i);e["default"]=o.a},cbd9:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("99af"),a("a434");var n=a("ef65"),o=(a("07e8"),a("a10b")),i={data:function(){return{list:[],current:1,pages:0,sts:0}},components:{},props:{},onLoad:function(t){t.sts?(this.setData({sts:t.sts}),this.loadOrderData(t.sts,1)):this.loadOrderData(0,1);var e=this;uni.$on("onChangeOrderStatus",(function(t){e.onChangeOrderStatus(t.index)}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){uni.$off("onChangeOrderStatus",(function(t){}))},onPullDownRefresh:function(){},onReachBottom:function(){this.current<this.pages&&this.loadOrderData(this.sts,this.current+1)},onShareAppMessage:function(){},methods:{loadOrderData:function(t,e){var a=this;uni.showLoading();var o={url:"/order/order/orderPage",method:"POST",data:{page:{current:e,size:10},params:{status:t}},callBack:function(t){var e=a.list;e=e.concat(t.items),a.setData({list:e,pages:t.meta.totalPages,current:t.meta.currentPage}),uni.hideLoading()}};n.request(o)},onStsTap:function(t){var e=t.currentTarget.dataset.sts;this.sts!==e&&(this.setData({sts:e,list:[],current:1,pages:0}),this.loadOrderData(e,1))},toDeliveryPage:function(t){uni.navigateTo({url:"/pages/express-delivery/express-delivery?orderNum="+t.currentTarget.dataset.ordernum})},onCancelOrder:function(t){var e=t.currentTarget.dataset.index,a=(t.currentTarget.dataset.ordernum,this);uni.showModal({title:"",content:"要取消此订单？",confirmColor:"#3e62ad",cancelColor:"#3e62ad",cancelText:"否",confirmText:"是",success:function(t){t.confirm?(uni.showLoading({mask:!0}),a.onChangeOrderStatus(e),uni.hideLoading()):t.cancel}})},onPayAgain:function(t){uni.showLoading({mask:!0});var e={url:"/p/order/pay",method:"POST",data:{payType:1,orderNumbers:t.currentTarget.dataset.ordernum},callBack:function(e){uni.hideLoading(),uni.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.packageValue,signType:e.signType,paySign:e.paySign,success:function(){uni.navigateTo({url:"/pages/pay-result/pay-result?sts=1&orderNumbers="+t.currentTarget.dataset.ordernum})},fail:function(t){}})}};n.request(e)},normalPay:function(t){var e=this,a=t.currentTarget.dataset.index,n=t.currentTarget.dataset.ordernum,i={success:function(){uni.showToast({title:"支付成功",icon:"none"}),uni.navigateTo({url:"/pages/pay-result/pay-result?sts=1&orderNumber="+n}),e.onChangeOrderStatus(a)},fail:function(){uni.showToast({title:"支付取消",icon:"none"})}};o.normalPay(n,i)},onChangeOrderStatus:function(t){console.log("删除列表项",t);var e=this.list;e.splice(t,1),this.setData({list:e})},toOrderDetailPage:function(t){var e=t.currentTarget.dataset.listindex;uni.navigateTo({url:"/pages/order-detail/order-detail?orderNumber="+t.currentTarget.dataset.ordernum+"&listIndex="+e})},onConfirmReceive:function(t){var e=this;uni.showModal({title:"",content:"我已收到货？",confirmColor:"#EC6817",success:function(a){if(a.confirm){uni.showLoading({mask:!0});var o={url:"/p/myOrder/receipt/"+t.currentTarget.dataset.ordernum,method:"PUT",data:{},callBack:function(t){e.loadOrderData(e.sts,1),uni.hideLoading()}};n.request(o)}else a.cancel}})},delOrderList:function(t){var e=this;uni.showModal({title:"",content:"确定要删除此订单吗？",confirmColor:"#EC6817",success:function(a){if(a.confirm){var o=t.currentTarget.dataset.ordernum;uni.showLoading();var i={url:"/p/myOrder/"+o,method:"DELETE",data:{},callBack:function(t){e.loadOrderData(e.sts,1),uni.hideLoading()}};n.request(i)}else a.cancel&&console.log("用户点击取消")}})},changeAddress:function(t){var e=t.currentTarget.dataset.addrid,a=t.currentTarget.dataset.orderid;uni.navigateTo({url:"/pages/order-address/order-address?addrId="+e+"&orderId="+a})}}};e.default=i}}]);