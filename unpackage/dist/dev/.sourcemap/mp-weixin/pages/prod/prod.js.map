{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhengheci/hlshop/mall4uni/pages/prod/prod.vue?2b15","webpack:////Users/zhengheci/hlshop/mall4uni/pages/prod/prod.vue?e5c9","webpack:////Users/zhengheci/hlshop/mall4uni/pages/prod/prod.vue?379b","webpack:////Users/zhengheci/hlshop/mall4uni/pages/prod/prod.vue?94c2","uni-app:///pages/prod/prod.vue","webpack:////Users/zhengheci/hlshop/mall4uni/pages/prod/prod.vue?18cb","webpack:////Users/zhengheci/hlshop/mall4uni/pages/prod/prod.vue?b805","webpack:////Users/zhengheci/hlshop/mall4uni/wxs/number.wxs?74ee","webpack:////Users/zhengheci/hlshop/mall4uni/wxs/number.wxs?03d3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","indicatorDots","indicatorColor","indicatorActiveColor","autoplay","interval","duration","prodNum","totalCartNum","pic","imgs","contentImg","prodName","price","content","prodId","brief","popupShow","loadCouponIds","skuShow","commentShow","couponList","defaultSku","skuSelectData","selectedProp","selectedPropObj","propKeys","allProperties","prodCommData","prodCommPage","current","pages","records","littleCommPage","evaluate","isCollection","hideNavbar","lastScrollPosition","staticUrl","computed","fullImagePath","components","coupon","skuSelect","props","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","title","path","getCollection","uni","url","method","callBack","http","addOrCannelCollection","getProdInfo","setTimeout","getProdCommData","getLittleProdComm","getMoreCommPage","getProdCommPage","size","res","item","getCouponList","shopId","toHomePage","toCartPage","buyNow","JSON","skuId","itemCount","onCountMinus","onCountPlus","showPopup","console","couponIds","couponLimit","showSku","closeSkuselect","showComment","closePopup","moveHandle","isHTML","toIndexPage","onPopupChange"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmT;AACnT;AACwD;AACL;AACa;;;AAGhE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,iRAAM;AACR,EAAE,0RAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qRAAU;AACZ;AACA;;AAEA;AACoL;AACpL,WAAW,iMAAM,iBAAiB,yMAAM;;AAExC;AACe,gF;;;;;;;;;;;;AC3Bf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjFA;AAAA;AAAA;AAAA;AAAmzB,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACsUv0B;AACA,WAAW,mBAAO,CAAC,6BAAqB;AACxC,aAAa,mBAAO,CAAC,+BAAuB;AAC5C,WAAW,mBAAO,CAAC,6BAAqB;AAAxC;EAAA;IAAA;EAAA;AAAA;AAEA;AAAA;EAGAC;IACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAEA;MACA;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EAEAC;IACAC;MACA;QAAA;MAAA;IACA;EACA;EAEAC;IACAC;IACAC;EACA;EACAC;EAEA;AACA;AACA;EACAC;IACA;MACA9B;IACA;;IAEA;;IAEA;;IAEA;;IAEA;EACA;;EAEA;AACA;AACA;EACA+B;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;AAAA,6EAKA;EACA;IACAC;IACAC;EACA;AACA,yEACA;EACA;EACA;EACA;EACA;EACA;IACA;MACAlB;IACA;EACA;IACA;MACAA;IACA;EACA;;EAEA;EACA;AACA,oEACA;EACA;AACA;AACA;EACAmB;IAAA;IACAC;IACA;MACAC;MACAC;MACA1D;QACAe;MACA;MACA4C;QACA;UACAxB;QACA;QACAqB;MACA;IACA;IACAI;EACA;EAEA;AACA;AACA;EACAC;IAAA;IACAL;IACA;MACAC;MACAC;MACA1D;MACA2D;QACA;UACAxB;QACA;QACAqB;MACA;IACA;IACAI;EACA;EAEA;EACAE;IAAA;IACAN;IACA;MACAC;MACAC;MAEAC;QACAH;QACA;UACAO;YACAP;UACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA9C;UACAI;UACAH;UACAE;UACAD;UACAG;UACAC;UACAP;UACAc;QACA;QACA;QACA;;QAEAiC;MACA;IACA;IACAI;EACA;EAEAI;IAAA;IACAJ;MACAH;MACAC;MACA1D;QACAe;MACA;MACA4C;QACA;UACA/B;QACA;MACA;IACA;EACA;EAEA;EACAqC;IACA;MACA;IACA;IAEA;EACA;EAEAC;IACA;EACA;EAEA;EACAC;IAAA;IACA;MACA;QACA;MACA;MAEA;QACAtC;UACAC;UACAC;UACAC;QACA;QACAE;MACA;IACA;IAEA0B;MACAH;MACAC;MACA1D;QACA8B;QACAsC;QACArD;QACA;MACA;;MACA4C;QACAU;UACA;YACAC;UACA;QACA;QACA;QACAtC;QACA;UACAH;YACAC;YACAC;YACAC;UACA;QACA;;QAEA;UACA;YACAC;UACA;QACA;MACA;IACA;EACA;EAEAsC;IAAA;IACAX;MACAH;MACAC;MACA1D;QACAe;QACAyD;MACA;MACAb;QACA;UACAtC;QACA;MACA;IACA;EACA;EAEA;AACA;AACA;EACAoD;IACAjB;MACAC;IACA;EACA;EAEA;AACA;AACA;EACAiB;IACAlB;MACAC;IACA;EACA;EAEA;AACA;AACA;;EAEA;AACA;AACA;EACAkB;IACAnB,mBACA,aACAoB;MACA7D;MACA8D;MACAC;IACA,GACA;IACAtB;MACAC;IACA;EACA;EAEA;AACA;AACA;EACAsB;IACA;IAEA;MACA;QACAxE;MACA;IACA;EACA;EAEA;AACA;AACA;EACAyE;IACA;IAEA;MACA;QACAzE;MACA;IACA;EACA;EACA0E;IAAA;IACA;MACA;QACAhE;MACA;MACA;IACA;IAEA2C;MACAH;MACAC;MACA1D;MACA2D;QACA;QACAuB;QACA7D;UACA;YACA;YACA;YACA8D;cACA;gBACAC;cACA;YACA;;YAEA;cACA1C;YACA;cACAA;YACA;UACA;YACAA;UACA;QACA;QACA;UACArB;UACAJ;UACAC;QACA;MACA;IACA;EACA;EACAmE;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;MACAnE;IACA;EACA;EACAoE;IACA;MACAvE;MACAE;MACAC;IACA;EACA;EACAqE;IACA;EAAA,CACA;EAEAC;IACA;IACA,gBACA;IACA;EACA;EAEAC;IACA;IACAnC;MACAC;IACA;EACA;EACAmC;IACA;MACA;QACArE;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9xBA;AAAA;AAAA;AAAA;AAA0pC,CAAgB,+lCAAG,EAAC,C;;;;;;;;;;;ACA9qC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA,wCAAkV,CAAgB,kZAAG,EAAC,C;;;;;;;;;;;;ACAtW;AAAe;AACf;AACA;AACA;;AAEA,M","file":"pages/prod/prod.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/prod/prod.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./prod.vue?vue&type=template&id=58670366&filter-modules=eyJ3eHMiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTA2MDIsImF0dHJzIjp7Im1vZHVsZSI6Ind4cyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi93eHMvbnVtYmVyLnd4cyJ9LCJlbmQiOjEwNjAyfX0%3D&\"\nvar renderjs\nimport script from \"./prod.vue?vue&type=script&lang=js&\"\nexport * from \"./prod.vue?vue&type=script&lang=js&\"\nimport style0 from \"./prod.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"../../wxs/number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Fzhengheci%2Fhlshop%2Fmall4uni%2Fpages%2Fprod%2Fprod.vue&module=wxs&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"pages/prod/prod.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./prod.vue?vue&type=template&id=58670366&filter-modules=eyJ3eHMiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6MTA2MDIsImF0dHJzIjp7Im1vZHVsZSI6Ind4cyIsImxhbmciOiJ3eHMiLCJzcmMiOiIuLi8uLi93eHMvbnVtYmVyLnd4cyJ9LCJlbmQiOjEwNjAyfX0%3D&\"","var components\ntry {\n  components = {\n    uniLink: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-link/components/uni-link/uni-link\" */ \"@/uni_modules/uni-link/components/uni-link/uni-link.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.imgs, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.fullImagePath(item)\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  var m1 = _vm.isHTML(_vm.content)\n  var l1 = _vm.__map(_vm.contentImg, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var m2 = _vm.fullImagePath(item)\n    return {\n      $orig: $orig,\n      m2: m2,\n    }\n  })\n  var g0 = _vm.commentShow ? _vm.prodCommPage.records.length : null\n  var l2 =\n    _vm.commentShow && g0\n      ? _vm.__map(_vm.prodCommPage.records, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g1 = item.pics && item.pics.length\n          return {\n            $orig: $orig,\n            g1: g1,\n          }\n        })\n      : null\n  var g2 = _vm.commentShow ? _vm.prodCommPage.records.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        m1: m1,\n        l1: l1,\n        g0: g0,\n        l2: l2,\n        g2: g2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./prod.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./prod.vue?vue&type=script&lang=js&\"","<template>\n  <!-- 商品详情 -->\n  <view id=\"container\" class=\"container\" ref=\"content\">\n    <view\n      :class=\"{ 'head-nav-container--hidden': hideNavbar }\"\n      class=\"head-nav-container\"\n    >\n      <uni-link class=\"head-nav-item\" href=\"#container\">商品</uni-link>\n      <uni-link class=\"head-nav-item\" href=\"#detail\">详情</uni-link>\n      <uni-link class=\"head-nav-item\" href=\"#recommend\">推荐</uni-link>\n    </view>\n    <!-- 轮播图 -->\n    <view class=\"head-title\">\n      <image class=\"head-logo\" src=\"../../static/images/logo/image.png\"></image>\n      <view class=\"head-text\">红丽外贸服装</view>\n    </view>\n    <swiper\n      :indicator-dots=\"indicatorDots\"\n      :autoplay=\"autoplay\"\n      :indicator-color=\"indicatorColor\"\n      :interval=\"interval\"\n      :duration=\"duration\"\n      :indicator-active-color=\"indicatorActiveColor\"\n    >\n      <block v-for=\"(item, index) in imgs\" :key=\"index\">\n        <swiper-item>\n          <view\n            class=\"swiper-img\"\n            :style=\"{ backgroundImage: `url(${fullImagePath(item)})` }\"\n          ></view>\n        </swiper-item>\n      </block>\n    </swiper>\n    <!-- end  轮播图 -->\n    <!-- 商品信息 -->\n    <!-- <block wx:for=\"{{imgs}}\" wx:key=''> -->\n    <view class=\"prod-info\">\n      <!-- 商品名,收藏按钮 -->\n      <view class=\"tit-wrap\">\n        <view class=\"brand-label\">品牌</view>\n        <view class=\"prod-tit\">{{ prodName }}</view>\n      </view>\n      <!-- 商品简介 -->\n      <view class=\"sales-p\">{{ brief }}</view>\n      <!-- 商品价格 -->\n      <view class=\"prod-price\">\n        <text class=\"price\"\n          >￥\n          <text class=\"price-num\"> {{ price }} </text>\n        </text>\n        <!-- <text v-if=\"defaultSku && defaultSku.price\" class=\"price\"\n          >￥<text class=\"price-num\">{{\n            wxs.parsePrice(defaultSku.price)[0]\n          }}</text\n          >.{{ wxs.parsePrice(defaultSku.price)[1] }}</text\n        >\n        <text v-if=\"defaultSku && defaultSku.oriPrice\" class=\"ori-price\">\n          ￥{{ wxs.parsePrice(defaultSku.oriPrice)[0] }}.{{\n            wxs.parsePrice(defaultSku.oriPrice)[1]\n          }}\n        </text> -->\n        <text class=\"sales\"></text>\n      </view>\n      <!-- <button class=\"share-icon\" open-type=\"share\">\n        <image src='../../images/icon/share.png'></image>\n        <view class=\"share-text\">分享</view>\n      </button> -->\n    </view>\n    <!-- </block> -->\n    <!-- end 商品信息 -->\n    <!-- 领券 -->\n    <!-- <view class=\"coupon\" bindtap='showPopup' wx:if=\"{{couponList.length}}\">\n    <view class=\"coupon-tit\">领券</view>\n    <view class=\"coupon-con\">\n      <text class=\"item\" wx:for=\"{{couponList}}\" wx:key=\"item.couponId\">满{{item.cashCondition}}<block wx:if=\"{{item.couponType == 1}}\">减{{item.reduceAmount}}</block><block wx:if=\"{{item.couponType == 2}}\">打{{item.couponDiscount}}折</block></text>\n    </view>\n    <view class=\"num\">共{{couponList.length}}张</view>\n    <view class=\"more\">...</view>\n  </view> -->\n    <!-- 已选规格 -->\n    <view class=\"sku\" @tap=\"showSku\">\n      <view class=\"sku-tit\">选择</view>\n      <view class=\"sku-con\">颜色，尺码</view>\n      <view class=\"more\">...</view>\n    </view>\n    <!-- 评价 -->\n    <!-- <view class=\"cmt-wrap\" id=\"comment\">\n      <view class=\"cmt-tit\" @tap=\"showComment\">\n        <view class=\"cmt-t\"> 商品评价 </view>\n        <view class=\"cmt-count\">\n          {{ littleCommPage.length > 0 ? \"查看全部\" : \"暂无评价\" }}\n          <text v-if=\"littleCommPage.length > 0\" class=\"cmt-more\"></text>\n        </view>\n      </view>\n      <view class=\"cmt-cont\">\n        <view class=\"cmt-items\">\n          <view\n            v-for=\"(item, index) in littleCommPage\"\n            :key=\"index\"\n            class=\"cmt-item\"\n          >\n            <view class=\"cmt-user\">\n              <uni-dateformat\n                class=\"date\"\n                :date=\"item.recTime\"\n              ></uni-dateformat>\n\n              <view class=\"cmt-user-info\">\n                <image\n                  class=\"user-img\"\n                  :src=\"\n                    item.avatarUrl && item.avatarUrl != ''\n                      ? staticUrl + item.avatarUrl\n                      : '../../static/images/avatar/dress.png'\n                  \"\n                ></image>\n                <view class=\"nickname\">{{\n                  item.isAnonymous === 1 ? \"匿名用户\" : item.nickName\n                }}</view>\n                <view class=\"prod-attr\">\n                  {{ item.prodAttrDesc }}\n                </view>\n                <van-rate\n                  readonly\n                  :value=\"item.score\"\n                  @change=\"onChange\"\n                  color=\"#f44\"\n                ></van-rate>\n              </view>\n            </view>\n            <view class=\"cmt-cnt\">{{ item.content }}</view>\n            <scroll-view\n              class=\"cmt-attr\"\n              scroll-x=\"true\"\n              v-if=\"item.pics && item.pics.length\"\n            >\n              <image\n                v-for=\"(commPic, index2) in item.pics\"\n                :key=\"index2\"\n                :src=\"commPic\"\n              ></image>\n            </scroll-view>\n          </view>\n        </view>\n      </view>\n    </view> -->\n    <!-- 店铺导航 -->\n    <view class=\"shop-nav\">\n      <image\n        class=\"shop-nav-logo\"\n        src=\"../../static/images/logo/image.png\"\n      ></image>\n      <view class=\"shop-nav-text\">红丽外贸服装</view>\n      <button class=\"shop-nav-btn\" @tap=\"toIndexPage\">进店逛逛</button>\n    </view>\n    <!-- 为你推荐 -->\n    <!-- <view class=\"recommend\">\n      <view class=\"recommend-title\">\n        <view class=\"recommend-text\">为你推荐</view>\n        <text class=\"recommend-more\"></text>\n      </view>\n    </view> -->\n    <!-- 商品详情 -->\n    <view class=\"prod-detail\" id=\"detail\">\n      <view>\n        <view v-if=\"isHTML(content)\">\n          <rich-text :nodes=\"content\"></rich-text>\n        </view>\n        <view class=\"prod-detail-content\" v-else> {{ content }} </view>\n        <block v-for=\"(item, index) in contentImg\" :key=\"index\">\n          <image\n            class=\"content-img\"\n            :src=\"fullImagePath(item)\"\n            mode=\"widthFix\"\n          ></image>\n        </block>\n      </view>\n    </view>\n    <!-- end 商品详情 -->\n    <!-- 底部按钮 -->\n    <view class=\"cart-footer\">\n      <view class=\"btn icon\" @tap=\"toHomePage\">\n        <image src=\"/static/images/tabbar/homepage.png\"></image>\n        首页\n      </view>\n      <view class=\"btn icon\" @tap=\"toCartPage\">\n        <image src=\"/static/images/tabbar/basket.png\"></image>\n        购物车\n        <view class=\"badge badge-1\" v-if=\"totalCartNum > 0\">{{\n          totalCartNum\n        }}</view>\n      </view>\n      <view class=\"btn cart\" @tap=\"showSku\">\n        <text>加入购物车</text>\n      </view>\n      <view class=\"btn buy\" @tap=\"showSku\">\n        <text>立即购买</text>\n      </view>\n    </view>\n\n    <!-- end 底部按钮 -->\n\n    <!-- 优惠券 -->\n    <!-- <view class=\"popup-hide\" wx:if=\"{{popupShow}}\">\n    <view class=\"popup-box\">\n      <view class=\"popup-tit\">\n        <text>优惠券</text>\n        <text class=\"close\" bindtap='closePopup'></text>\n      </view>\n      <view class='popup-cnt'>\n        <block wx:for=\"{{couponList}}\" wx:key='couponId'>\n          <coupon showTimeType=\"{{1}}\" canUse=\"{{true}}\" item=\"{{item}}\"></coupon>\n        </block>\n      </view>\n    </view>\n  </view> -->\n    <!-- 底部弹出 -->\n    <uni-popup\n      class=\"sku-select\"\n      ref=\"skuselect\"\n      @touchmove.stop.prevent=\"moveHandle\"\n      @change=\"onPopupChange\"\n    >\n      <skuSelect\n        :skuSelectData=\"skuSelectData\"\n        :prodId=\"prodId\"\n        @close-popup=\"closeSkuselect\"\n      ></skuSelect>\n    </uni-popup>\n    <!-- 评价 -->\n    <!-- TODO 不要做弹窗,做新的页面 -->\n    <view class=\"cmt-popup\" v-if=\"commentShow\">\n      <view class=\"cmt-tit\">\n        <view class=\"cmt-t\">\n          商品评价\n          <text class=\"cmt-good\">好评度{{ prodCommData.positiveRating }}%</text>\n        </view>\n        <text class=\"close\" @tap=\"closePopup\"></text>\n      </view>\n      <view class=\"cmt-cont\">\n        <view class=\"cmt-tag\">\n          <text\n            @tap=\"getProdCommPage\"\n            data-evaluate=\"-1\"\n            :class=\"evaluate == -1 ? 'selected' : ''\"\n            >全部({{ prodCommData.number }})</text\n          >\n          <text\n            @tap=\"getProdCommPage\"\n            data-evaluate=\"0\"\n            :class=\"evaluate == 0 ? 'selected' : ''\"\n            >好评({{ prodCommData.praiseNumber }})</text\n          >\n          <text\n            @tap=\"getProdCommPage\"\n            data-evaluate=\"1\"\n            :class=\"evaluate == 1 ? 'selected' : ''\"\n            >中评({{ prodCommData.secondaryNumber }})</text\n          >\n          <text\n            @tap=\"getProdCommPage\"\n            data-evaluate=\"2\"\n            :class=\"evaluate == 2 ? 'selected' : ''\"\n            >差评({{ prodCommData.negativeNumber }})</text\n          >\n          <text\n            @tap=\"getProdCommPage\"\n            data-evaluate=\"3\"\n            :class=\"evaluate == 3 ? 'selected' : ''\"\n            >有图({{ prodCommData.picNumber }})</text\n          >\n        </view>\n        <view class=\"cmt-items\">\n          <block v-if=\"prodCommPage.records.length\">\n            <view\n              v-for=\"(item, index) in prodCommPage.records\"\n              :key=\"index\"\n              class=\"cmt-item\"\n            >\n              <view class=\"cmt-user\">\n                <text class=\"date\">{{ item.recTime }}</text>\n                <view class=\"cmt-user-info\">\n                  <image class=\"user-img\" :src=\"item.pic\"></image>\n                  <view class=\"nickname\">{{ item.nickName }}</view>\n                  <!-- <van-rate readonly :value=\"item.score\" @change=\"onChange\" color=\"#f44\"></van-rate> -->\n                </view>\n              </view>\n              <view class=\"cmt-cnt\">{{ item.content }}</view>\n              <scroll-view\n                class=\"cmt-attr\"\n                scroll-x=\"true\"\n                v-if=\"item.pics && item.pics.length\"\n              >\n                <image\n                  v-for=\"(commPic, index2) in item.pics\"\n                  :key=\"index2\"\n                  :src=\"commPic\"\n                ></image>\n              </scroll-view>\n              <view class=\"cmt-reply\" v-if=\"item.replyContent\">\n                <text class=\"reply-tit\">店铺回复：</text>\n                {{ item.replyContent }}\n              </view>\n            </view>\n          </block>\n          <view v-if=\"!prodCommPage.records.length\" class=\"empty\"\n            >暂无评价</view\n          >\n        </view>\n        <view\n          class=\"load-more\"\n          v-if=\"prodCommPage.pages > prodCommPage.current\"\n        >\n          <text @tap=\"getMoreCommPage\">点击加载更多</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script module=\"wxs\" lang=\"wxs\" src=\"../../wxs/number.wxs\"></script>\n\n<script>\n// pages/prod/prod.js\nimport skuSelect from \"@/components/sku-select/sku-select.vue\";\n\nconst app = getApp();\nvar http = require(\"../../utils/http.js\");\nvar config = require(\"../../utils/config.js\");\nvar util = require(\"../../utils/util.js\");\nimport coupon from \"../../components/coupon/coupon\";\n// import vanRate from \"../../vant/rate/index\";\n\nexport default {\n  data() {\n    return {\n      // picDomain: config.picDomain,\n      indicatorDots: true,\n      indicatorColor: \"#f2f2f2\",\n      indicatorActiveColor: \"#EC6817\",\n      autoplay: false,\n      interval: 10000,\n      duration: 1000,\n      prodNum: 1,\n      totalCartNum: 0,\n      pic: \"\",\n      imgs: \"\",\n      contentImg: [],\n      prodName: \"\",\n      price: 0,\n      content: \"\",\n      prodId: \"\",\n      brief: \"\",\n      popupShow: false,\n      // 是否获取过用户领取过的优惠券id\n      loadCouponIds: false,\n      skuShow: false,\n      commentShow: false,\n      couponList: [],\n\n      // skuList: [],\n      // skuGroup: {},\n      defaultSku: undefined,\n      skuSelectData: {},\n\n      selectedProp: [],\n      selectedPropObj: {},\n      propKeys: [],\n      allProperties: [],\n      prodCommData: {},\n      prodCommPage: {\n        current: 0,\n        pages: 0,\n        records: [],\n      },\n      littleCommPage: [],\n      evaluate: -1,\n      isCollection: false,\n      hideNavbar: true, // 控制是否显示顶部导航栏\n      lastScrollPosition: 0, // 记录上次滚动的位置\n      staticUrl: config.staticUrl,\n    };\n  },\n\n  computed: {\n    fullImagePath() {\n      return (path) => config.staticUrl + path;\n    },\n  },\n\n  components: {\n    coupon,\n    skuSelect,\n  },\n  props: {},\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.setData({\n      prodId: options.prodid,\n    }); // 加载商品信息\n\n    this.getProdInfo(); // 加载商品详情数据\n\n    //this.getProdCommData(); // 加载评论项\n\n    this.getLittleProdComm(); // 查看用户是否关注\n\n    //this.getCollection();\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {},\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {},\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {},\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {},\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {},\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {},\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {},\n\n  /**\n   * 分享设置\n   */\n  onShareAppMessage: function (res) {\n    return {\n      title: this.prodName,\n      path: \"/pages/prod/prod?prodid=\" + this.prodid,\n    };\n  },\n  onPageScroll: function (e) {\n    // 获取当前滚动位置\n    const currentScrollPosition = e.scrollTop;\n    // 如果当前滚动位置大于上次滚动位置，则显示顶部导航栏\n    // 否则隐藏顶部导航栏\n    if (currentScrollPosition === 0) {\n      this.setData({\n        hideNavbar: true,\n      });\n    } else {\n      this.setData({\n        hideNavbar: false,\n      });\n    }\n\n    // 更新上次滚动位置为当前滚动位置\n    this.lastScrollPosition = currentScrollPosition;\n  },\n  methods: {\n    /**\n     * 获取是否关注信息\n     */\n    getCollection() {\n      uni.showLoading();\n      var params = {\n        url: \"/p/user/collection/isCollection\",\n        method: \"GET\",\n        data: {\n          prodId: this.prodId,\n        },\n        callBack: (res) => {\n          this.setData({\n            isCollection: res,\n          });\n          uni.hideLoading();\n        },\n      };\n      http.request(params);\n    },\n\n    /**\n     * 添加或者取消收藏商品\n     */\n    addOrCannelCollection() {\n      uni.showLoading();\n      var params = {\n        url: \"/p/user/collection/addOrCancel\",\n        method: \"POST\",\n        data: this.prodId,\n        callBack: (res) => {\n          this.setData({\n            isCollection: !this.isCollection,\n          });\n          uni.hideLoading();\n        },\n      };\n      http.request(params);\n    },\n\n    // 获取商品信息\n    getProdInfo() {\n      uni.showLoading();\n      var params = {\n        url: \"/prod/prod/prodDetail/\" + this.prodId,\n        method: \"GET\",\n\n        callBack: (res) => {\n          uni.hideLoading();\n          if (!res) {\n            setTimeout(() => {\n              uni.navigateBack();\n            }, 1000);\n            return;\n          }\n          var imgStrs = res.imgs;\n          var imgs = imgStrs.split(\",\");\n          var content = util.formatHtml(res.content);\n          var contentImg = res.contentImg.split(\",\");\n          this.setData({\n            imgs: imgs,\n            content: content,\n            contentImg: contentImg,\n            price: res.price,\n            prodName: res.prodName,\n            prodId: res.prodId,\n            brief: res.brief,\n            pic: res.pic,\n            skuSelectData: res.prodSkuSelectDTO,\n          }); // 获取优惠券\n          //this.getCouponList();\n          // 组装sku\n\n          uni.hideLoading();\n        },\n      };\n      http.request(params);\n    },\n\n    getProdCommData() {\n      http.request({\n        url: \"/prodComm/prodCommData\",\n        method: \"GET\",\n        data: {\n          prodId: this.prodId,\n        },\n        callBack: (res) => {\n          this.setData({\n            prodCommData: res,\n          });\n        },\n      });\n    },\n\n    // 获取部分评论\n    getLittleProdComm() {\n      if (this.prodCommPage.records.length) {\n        return;\n      }\n\n      this.getProdCommPage();\n    },\n\n    getMoreCommPage(e) {\n      this.getProdCommPage();\n    },\n\n    // 获取分页获取评论\n    getProdCommPage(e) {\n      if (e) {\n        if (e.currentTarget.dataset.evaluate === this.evaluate) {\n          return;\n        }\n\n        this.setData({\n          prodCommPage: {\n            current: 0,\n            pages: 0,\n            records: [],\n          },\n          evaluate: e.currentTarget.dataset.evaluate,\n        });\n      }\n\n      http.request({\n        url: \"/prod/prodComment/prodCommmentPage\",\n        method: \"POST\",\n        data: {\n          current: this.prodCommPage.current + 1,\n          size: 10,\n          prodId: this.prodId,\n          // evaluate: this.evaluate,\n        },\n        callBack: (res) => {\n          res.items.forEach((item) => {\n            if (item.pics) {\n              item.pics = item.pics.split(\",\");\n            }\n          });\n          let records = this.prodCommPage.records;\n          records = records.concat(res.items);\n          this.setData({\n            prodCommPage: {\n              current: res.current,\n              pages: res.pages,\n              records: records,\n            },\n          }); // 如果商品详情中没有评论的数据，截取两条到商品详情页商品详情\n\n          if (!this.littleCommPage.length) {\n            this.setData({\n              littleCommPage: records.slice(0, 2),\n            });\n          }\n        },\n      });\n    },\n\n    getCouponList() {\n      http.request({\n        url: \"/coupon/listByProdId\",\n        method: \"GET\",\n        data: {\n          prodId: this.prodId,\n          shopId: this.shopId,\n        },\n        callBack: (res) => {\n          this.setData({\n            couponList: res,\n          });\n        },\n      });\n    },\n\n    /**\n     * 跳转到首页\n     */\n    toHomePage: function () {\n      uni.switchTab({\n        url: \"/pages/index/index\",\n      });\n    },\n\n    /**\n     * 跳转到购物车\n     */\n    toCartPage: function () {\n      uni.switchTab({\n        url: \"/pages/basket/basket\",\n      });\n    },\n\n    /**\n     * 加入购物车\n     */\n\n    /**\n     * 立即购买\n     */\n    buyNow: function () {\n      uni.setStorageSync(\n        \"orderItem\",\n        JSON.stringify({\n          prodId: this.prodId,\n          skuId: this.defaultSku.skuId,\n          itemCount: this.prodNum,\n        })\n      );\n      uni.navigateTo({\n        url: \"/pages/submit-order/submit-order?orderEntry=1\",\n      });\n    },\n\n    /**\n     * 减数量\n     */\n    onCountMinus: function () {\n      var prodNum = this.prodNum;\n\n      if (prodNum > 1) {\n        this.setData({\n          prodNum: prodNum - 1,\n        });\n      }\n    },\n\n    /**\n     * 加数量\n     */\n    onCountPlus: function () {\n      var prodNum = this.prodNum;\n\n      if (prodNum < 1000) {\n        this.setData({\n          prodNum: prodNum + 1,\n        });\n      }\n    },\n    showPopup: function () {\n      if (this.loadCouponIds) {\n        this.setData({\n          popupShow: true,\n        });\n        return;\n      }\n\n      http.request({\n        url: \"/p/myCoupon/listCouponIds\",\n        method: \"GET\",\n        data: {},\n        callBack: (couponIds) => {\n          var couponList = this.couponList;\n          console.log(couponList);\n          couponList.forEach((coupon) => {\n            if (couponIds && couponIds.length) {\n              // 领取该优惠券数量\n              var couponLimit = 0;\n              couponIds.forEach((couponId) => {\n                if (couponId == coupon.couponId) {\n                  couponLimit++;\n                }\n              }); // 小于用户领取优惠券上限，可以领取优惠券\n\n              if (couponLimit < coupon.limitNum) {\n                coupon.canReceive = true;\n              } else {\n                coupon.canReceive = false;\n              }\n            } else {\n              coupon.canReceive = true;\n            }\n          });\n          this.setData({\n            couponList: couponList,\n            popupShow: true,\n            loadCouponIds: true,\n          });\n        },\n      });\n    },\n    showSku: function () {\n      this.$refs.skuselect.open(\"bottom\");\n    },\n    closeSkuselect: function () {\n      this.$refs.skuselect.close();\n    },\n    showComment: function () {\n      this.setData({\n        commentShow: true,\n      });\n    },\n    closePopup: function () {\n      this.setData({\n        popupShow: false,\n        skuShow: false,\n        commentShow: false,\n      });\n    },\n    moveHandle() {\n      //禁止父元素滑动\n    },\n\n    isHTML(str) {\n      // 使用正则表达式检查字符串中是否包含HTML标签\n      const htmlRegex =\n        /<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)<\\/\\1>|<([A-Za-z][A-Za-z0-9]*)\\b[^\\/]*\\/>/;\n      return htmlRegex.test(str);\n    },\n\n    toIndexPage: function () {\n      var url = \"/pages/index/index\";\n      uni.switchTab({\n        url: url,\n      });\n    },\n    onPopupChange(e) {\n      if (!e.show) {\n        this.setData({\n          skuSelectData: {},\n        });\n      }\n    },\n  },\n};\n</script>\n<style>\n@import \"./prod.css\";\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./prod.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./prod.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1728895428131\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Fzhengheci%2Fhlshop%2Fmall4uni%2Fpages%2Fprod%2Fprod.vue&module=wxs&lang=wxs\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Fzhengheci%2Fhlshop%2Fmall4uni%2Fpages%2Fprod%2Fprod.vue&module=wxs&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}