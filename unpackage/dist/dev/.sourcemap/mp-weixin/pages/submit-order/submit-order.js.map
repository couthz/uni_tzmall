{"version":3,"sources":["uni-app:///main.js","webpack:////Users/zhengheci/hlshop/mall4uni/pages/submit-order/submit-order.vue?a12d","webpack:////Users/zhengheci/hlshop/mall4uni/pages/submit-order/submit-order.vue?05ad","webpack:////Users/zhengheci/hlshop/mall4uni/pages/submit-order/submit-order.vue?9a2b","webpack:////Users/zhengheci/hlshop/mall4uni/pages/submit-order/submit-order.vue?3827","uni-app:///pages/submit-order/submit-order.vue","webpack:////Users/zhengheci/hlshop/mall4uni/pages/submit-order/submit-order.vue?427a","webpack:////Users/zhengheci/hlshop/mall4uni/pages/submit-order/submit-order.vue?be6c","webpack:////Users/zhengheci/hlshop/mall4uni/wxs/number.wxs?ec23","webpack:////Users/zhengheci/hlshop/mall4uni/wxs/number.wxs?e9df"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","popupShow","couponSts","couponList","orderEntry","userAddr","orderItems","coupon","totalLength","canUseCoupons","noCanUseCoupons","actualTotal","total","totalCount","transfee","reduceAmount","remarks","couponIds","coupons","orderReduce","item","selAddress","components","props","onLoad","onReady","onShow","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","methods","loadOrderData","addrId","uni","mask","url","method","buynowSkuDTO","JSON","undefined","shopcartItemIds","callBack","res","unCanUseCoupons","errCallBack","http","chooseCouponErrHandle","title","icon","duration","success","setTimeout","toPay","submitOrder","orderSubmitParam","console","normalPay","orderNumbers","calWeixinPay","payType","timeStamp","nonceStr","package","signType","paySign","fail","changeCouponSts","showCouponPopup","closePopup","toAddrListPage","choosedCoupon","checkCoupon","ths"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,oBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqT;AACrT;AACgE;AACL;AACa;;;AAGxE;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mRAAM;AACR,EAAE,4RAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uRAAU;AACZ;AACA;;AAEA;AACoM;AACpM,WAAW,iNAAM,iBAAiB,yNAAM;;AAExC;AACe,gF;;;;;;;;;;;;AC3Bf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,4KAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAA2zB,CAAgB,0yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuN/0B;AACA,WAAW,mBAAO,CAAC,6BAAqB;AAAxC;EAAA;IAAA;EAAA;AAAA;AAAA,eAGA;EACAC;IACA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACAf;EACA;EACAgB;EAEA;AACA;AACA;EACAC;IACA;MACApB;IACA;EACA;EAEA;AACA;AACA;EACAqB;EAEA;AACA;AACA;EACAC;IACA;IACA;IACA;MACA;MACA;IACA;;IAEA;IACA;EACA;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EAEA;AACA;AACA;EACAC;EACAC;IACA;IACAC;MAAA;MACA;MAEA;QACAC;MACA;MAEAC;QACAC;MACA;MACA;QACAC;QACAC;QACAtC;UACAkC;UACAK,cACA,0BACAC,8CACAC;UACAC,iBACA,0BACAF,oDACAC;QACA;QACAE;UACAR;UACA;UACA7B;UAEA;YACA;YACA;YACAsC;cACA;gBACAnC;cACA;gBACAoC;cACA;YACA;YACA;cACA3B;gBACAV;gBACAC;gBACAoC;cACA;YACA;UACA;UAEA;YACAvC;YACAK;YACAC;YACAC;YACAR;YACAS;YACAK;UACA;QACA;QACA2B;UACAX;UACA;QACA;MACA;MACAY;IACA;IAEA;AACA;AACA;IACAC;MAAA;MACA;MACA;QACAb;UACAc;UACAC;UACAC;UACAC;YACA;cACAnC;YACA;UACA;QACA;QACAoC;UACA;QACA;MACA;IACA;IAEA;AACA;AACA;IACAC;MACA;QACAnB;UACAc;UACAC;QACA;QACA;MACA;MAEA;IACA;IACAK;MAAA;MACApB;QACAC;MACA;MACA;QACAC;QACAC;QACAtC;UACAwD;YACAxC;UACA;QACA;QACA2B;UACAc;UACAtB;UACA;UACA;QACA;MACA;MACAY;IACA;IAEA;IACAW;MACAvB;QACAC;MACA;MACA;QACAC;QACAC;QACAtC;UACA2D;QACA;QACAhB;UACAR;UACAA;YACAc;YACAC;UACA;UACAG;YACAlB;cACAE,KACA,qDACAsB;YACA;UACA;QACA;MACA;MACAZ;IACA;IAEA;AACA;AACA;IACAa;MACAzB;QACAC;MACA;MACA;QACAC;QACAC;QACAtC;UACA6D;UACAF;QACA;QACAhB;UAAA;UACAR;UACAA;YACA2B;YACAC;YACAC;YACAC;YACAC;YACAd;cACA;cACAjB;gBACAE,KACA,qDACAsB,eACA,gBACA;cACA;YACA;YACAQ;cACAhC;gBACAE,KACA,qDACAsB,eACA,gBACA;cACA;YACA;UACA;QACA;MACA;MACAZ;IACA;IACAqB;MACA;QACAlE;MACA;IACA;IACAmE;MACA;QACApE;MACA;IACA;IACAqE;MACA;QACArE;MACA;IACA;IAEA;AACA;AACA;IACAsE;MACApC;QACAE;MACA;IACA;IAEA;AACA;AACA;IACAmC;MACA;MACA;QACAvE;MACA;IACA;IAEA;AACA;AACA;IACAwE;MACA;MACA;MAEA;QACAC;MACA;QACAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC5iBA;AAAA;AAAA;AAAA;AAAkqC,CAAgB,umCAAG,EAAC,C;;;;;;;;;;;ACAtrC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA,wCAAkW,CAAgB,kaAAG,EAAC,C;;;;;;;;;;;;ACAtX;AAAe;AACf;AACA;AACA;;AAEA,M","file":"pages/submit-order/submit-order.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/submit-order/submit-order.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./submit-order.vue?vue&type=template&id=c955beb4&filter-modules=eyJ3eHMiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzI5MywiYXR0cnMiOnsibW9kdWxlIjoid3hzIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3d4cy9udW1iZXIud3hzIn0sImVuZCI6NzI5M319&\"\nvar renderjs\nimport script from \"./submit-order.vue?vue&type=script&lang=js&\"\nexport * from \"./submit-order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./submit-order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"../../wxs/number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Fzhengheci%2Fhlshop%2Fmall4uni%2Fpages%2Fsubmit-order%2Fsubmit-order.vue&module=wxs&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"pages/submit-order/submit-order.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit-order.vue?vue&type=template&id=c955beb4&filter-modules=eyJ3eHMiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NzI5MywiYXR0cnMiOnsibW9kdWxlIjoid3hzIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3d4cy9udW1iZXIud3hzIn0sImVuZCI6NzI5M319&\"","var components\ntry {\n  components = {\n    coupon: function () {\n      return import(\n        /* webpackChunkName: \"components/coupon/coupon\" */ \"@/components/coupon/coupon.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.popupShow ? _vm.coupons.canUseCoupons.length : null\n  var g1 = _vm.popupShow && g0 ? _vm.coupons.canUseCoupons.length : null\n  var g2 = _vm.popupShow ? _vm.coupons.unCanUseCoupons.length : null\n  var g3 = _vm.popupShow && g2 ? _vm.coupons.unCanUseCoupons.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit-order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit-order.vue?vue&type=script&lang=js&\"","<template>\n  <view>\n    <!--pages/submit-order/submit-order.wxml-->\n    <view class=\"container\">\n      <view class=\"submit-order\">\n        <!-- 收货地址 -->\n        <view class=\"delivery-addr\" @tap=\"toAddrListPage\">\n          <view class=\"addr-bg\" v-if=\"!userAddr\">\n            <view class=\"add-addr\">\n              <view class=\"plus-sign-img\">\n                <image src=\"/static/images/icon/plus-sign.png\"></image>\n              </view>\n              <text>新增收货地址</text>\n            </view>\n            <view class=\"arrow empty\"></view>\n          </view>\n          <view class=\"addr-bg whole\" v-if=\"userAddr\">\n            <view class=\"addr-icon\">\n              <image src=\"/static/images/icon/addr.png\"></image>\n            </view>\n            <view class=\"user-info\">\n              <text class=\"item\">{{ userAddr.receiver }}</text>\n              <text class=\"item\">{{ userAddr.mobile }}</text>\n            </view>\n            <view class=\"addr\"\n              >{{ userAddr.province }}{{ userAddr.city }}{{ userAddr.area\n              }}{{ userAddr.addr }}</view\n            >\n            <view class=\"arrow\"></view>\n          </view>\n        </view>\n\n        <!-- 商品详情 -->\n        <view class=\"prod-item\">\n          <block v-for=\"(item, index) in orderItems\" :key=\"index\">\n            <view\n              class=\"item-cont\"\n              @tap=\"toOrderDetailPage\"\n              :data-ordernum=\"item.primaryOrderNo\"\n            >\n              <view class=\"prod-pic\">\n                <image :src=\"item.pic\"></image>\n              </view>\n              <view class=\"prod-info\">\n                <view class=\"prodname\">\n                  {{ item.prodName }}\n                </view>\n                <view class=\"prod-info-cont\">{{ item.skuName }}</view>\n                <view class=\"price-nums\">\n                  <text class=\"prodprice\"\n                    ><text class=\"symbol\">￥</text>\n                    <text class=\"big-num\">{{ item.price }}</text></text\n                  >\n                  <text class=\"prodcount\">x{{ item.itemCount }}</text>\n                </view>\n              </view>\n            </view>\n          </block>\n          <!-- <view class='item-cont' bindtap='toOrderDetailPage' data-ordernum=\"{{item.primaryOrderNo}}\">\n        <view class='prod-pic'>\n          <image src='../../images/prod/pic09.jpg'></image>\n        </view>\n        <view class='prod-info'>\n          <view class='prodname'>\n            THE BEAST/野兽派 易烊千玺同款\n          </view>\n          <view class='prod-info-cont'>经典杯型升级，杯型更细长优雅</view>\n          <view class='price-nums'>\n            <text class='prodprice'><text class='symbol'>￥</text>\n            <text class='big-num'>{{wxs.parsePrice(40.00)[0]}}</text>\n            <text class='small-num'>.{{wxs.parsePrice(40.00)[1]}}</text></text>\n            <text class=\"prodcount\">x1</text>\n          </view>\n        </view>\n      </view> -->\n\n          <view class=\"total-num\">\n            <text class=\"prodcount\">共{{ totalCount }}件商品</text>\n            <view class=\"prodprice\"\n              >合计：\n              <text class=\"symbol\">￥</text>\n              <text class=\"big-num\">{{ total }}</text>\n            </view>\n          </view>\n        </view>\n\n        <!-- 订单详情 -->\n        <view class=\"order-msg\">\n          <view class=\"msg-item\">\n            <view class=\"item coupon\" @tap=\"showCouponPopup\">\n              <text class=\"item-tit\">优惠券：</text>\n              <text class=\"item-txt\" v-if=\"!coupons.canUseCoupons\"\n                >暂无可用</text\n              >\n              <text class=\"coupon-btn\"\n                >{{ coupons.totalLength ? coupons.totalLength : 0 }}张</text\n              >\n              <text class=\"arrow\"></text>\n            </view>\n            <view class=\"item\">\n              <text>买家留言：</text>\n              <input v-model=\"remarks\" placeholder=\"给卖家留言\" />\n            </view>\n          </view>\n        </view>\n\n        <view class=\"order-msg\">\n          <view class=\"msg-item\">\n            <view class=\"item\">\n              <view class=\"item-tit\">订单总额：</view>\n              <view class=\"item-txt price\">\n                <text class=\"symbol\">￥</text>\n                <text class=\"big-num\">{{ total }}</text>\n              </view>\n            </view>\n            <view class=\"item\">\n              <view class=\"item-tit\">运费：</view>\n              <view class=\"item-txt price\">\n                <text class=\"symbol\">￥</text>\n                <text class=\"big-num\">{{ transfee || 0.00 }}</text>\n              </view>\n            </view>\n            <view class=\"item\">\n              <view class=\"item-tit\">优惠金额：</view>\n              <view class=\"item-txt price\">\n                <text class=\"symbol\">-￥</text>\n                <text class=\"big-num\">{{ orderReduce }}</text>\n              </view>\n            </view>\n            <view class=\"item payment\">\n              <view class=\"item-txt price\">\n                小计：\n                <text class=\"symbol\">￥</text>\n                <text class=\"big-num\">{{ actualTotal }}</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 底部栏 -->\n      <view class=\"submit-order-footer\">\n        <view class=\"sub-order\">\n          <view class=\"item-txt\">\n            合计：\n            <view class=\"price\">\n              <text class=\"symbol\">￥</text>\n              <text class=\"big-num\">{{ actualTotal }}</text>\n            </view>\n          </view>\n        </view>\n        <view class=\"footer-box\" @tap=\"toPay\"> 提交订单 </view>\n      </view>\n    </view>\n\n    <!-- 选择优惠券弹窗 -->\n    <view class=\"popup-hide\" v-if=\"popupShow\">\n      <view class=\"popup-box\">\n        <view class=\"popup-tit\">\n          <text>优惠券</text>\n          <text class=\"close\" @tap=\"closePopup\"></text>\n        </view>\n        <view class=\"coupon-tabs\">\n          <view\n            :class=\"'coupon-tab ' + (couponSts == 1 ? 'on' : '')\"\n            @tap=\"changeCouponSts\"\n            data-sts=\"1\"\n            >可用优惠券({{\n              coupons.canUseCoupons.length ? coupons.canUseCoupons.length : 0\n            }})</view\n          >\n          <view\n            :class=\"'coupon-tab ' + (couponSts == 2 ? 'on' : '')\"\n            @tap=\"changeCouponSts\"\n            data-sts=\"2\"\n            >不可用优惠券({{\n              coupons.unCanUseCoupons.length\n                ? coupons.unCanUseCoupons.length\n                : 0\n            }})</view\n          >\n        </view>\n        <view class=\"popup-cnt\">\n          <view v-if=\"couponSts === 1\">\n            <block v-for=\"(item, index) in coupons.canUseCoupons\" :key=\"index\">\n              <coupon\n                :item=\"item\"\n                order=\"true\"\n                @checkCoupon=\"checkCoupon\"\n                canUse=\"true\"\n              ></coupon>\n            </block>\n          </view>\n          <view v-if=\"couponSts === 2\">\n            <block\n              v-for=\"(item, index) in coupons.unCanUseCoupons\"\n              :key=\"index\"\n            >\n              <coupon :item=\"item\" order=\"true\" canUse=\"false\"></coupon>\n            </block>\n          </view>\n\n          <view class=\"botm-empty\"></view>\n        </view>\n        <view class=\"coupon-ok\" v-if=\"couponSts === 1\">\n          <text @tap=\"choosedCoupon\">确定</text>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script module=\"wxs\" lang=\"wxs\" src=\"../../wxs/number.wxs\"></script>\n\n<script>\n// pages/submit-order/submit-order.js\nvar http = require(\"../../utils/http.js\");\nimport coupon from \"../../components/coupon/coupon\";\n\nexport default {\n  data() {\n    return {\n      popupShow: false,\n      couponSts: 1,\n      couponList: [],\n      // 订单入口 0购物车 1立即购买\n      orderEntry: \"0\",\n      userAddr: null,\n      orderItems: [],\n      coupon: {\n        totalLength: 0,\n        canUseCoupons: [],\n        noCanUseCoupons: [],\n      },\n      actualTotal: 0,\n      total: 0,\n      totalCount: 0,\n      transfee: 0,\n      reduceAmount: 0,\n      remarks: \"\",\n      couponIds: [],\n      coupons: {},\n      orderReduce: 0,\n      item: {},\n      selAddress: \"\",\n    };\n  },\n\n  components: {\n    coupon,\n  },\n  props: {},\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n    this.setData({\n      orderEntry: options.orderEntry,\n    });\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {},\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n    var pages = getCurrentPages();\n    var currPage = pages[pages.length - 1];\n    if (currPage.selAddress == \"yes\") {\n      //将携带的参数赋值\n      this.userAddr = currPage.item;\n    }\n\n    //获取订单数据\n    this.loadOrderData();\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {},\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {},\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {},\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {},\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {},\n  methods: {\n    //加载订单数据\n    loadOrderData: function () {\n      var addrId = 0;\n\n      if (this.userAddr != null) {\n        addrId = this.userAddr.addrId;\n      }\n\n      uni.showLoading({\n        mask: true,\n      });\n      var params = {\n        url: this.orderEntry === \"1\" ? \"/order/order/buynowGetCheckOut\" : \"/order/order/shopcartGetCheckOut\",\n        method: \"POST\",\n        data: {\n          addrId: addrId,\n          buynowSkuDTO:\n            this.orderEntry === \"1\"\n              ? JSON.parse(uni.getStorageSync(\"orderItem\"))\n              : undefined,\n          shopcartItemIds:\n            this.orderEntry === \"0\"\n              ? JSON.parse(uni.getStorageSync(\"shopcartItemIds\"))\n              : undefined,\n        },\n        callBack: (res) => {\n          uni.hideLoading();\n          let orderItems = [];\n          orderItems = orderItems.concat(res.checkOutSkuDTOs);\n\n          if (res.coupons) {\n            let canUseCoupons = [];\n            let unCanUseCoupons = [];\n            res.coupons.forEach((coupon) => {\n              if (coupon.canUse) {\n                canUseCoupons.push(coupon);\n              } else {\n                unCanUseCoupons.push(coupon);\n              }\n            });\n            this.setData({\n              coupons: {\n                totalLength: res.coupons.length,\n                canUseCoupons: canUseCoupons,\n                unCanUseCoupons: unCanUseCoupons,\n              },\n            });\n          }\n\n          this.setData({\n            orderItems: orderItems,\n            actualTotal: res.totalPay,\n            total: res.total,\n            totalCount: res.totalCount,\n            userAddr: res.userAddr,\n            transfee: res.transfee,\n            orderReduce: res.orderReduce,\n          });\n        },\n        errCallBack: (res) => {\n          uni.hideLoading();\n          this.chooseCouponErrHandle(res);\n        },\n      };\n      http.request(params);\n    },\n\n    /**\n     * 优惠券选择出错处理方法\n     */\n    chooseCouponErrHandle(res) {\n      // 优惠券不能共用处理方法\n      if (res.statusCode == 601) {\n        uni.showToast({\n          title: res.data,\n          icon: \"none\",\n          duration: 3000,\n          success: (res) => {\n            this.setData({\n              couponIds: [],\n            });\n          },\n        });\n        setTimeout(() => {\n          this.loadOrderData();\n        }, 2500);\n      }\n    },\n\n    /**\n     * 提交订单\n     */\n    toPay: function () {\n      if (!this.userAddr) {\n        uni.showToast({\n          title: \"请选择地址\",\n          icon: \"none\",\n        });\n        return;\n      }\n\n      this.submitOrder();\n    },\n    submitOrder: function () {\n      uni.showLoading({\n        mask: true,\n      });\n      var params = {\n        url: \"/order/order/submit\",\n        method: \"POST\",\n        data: {\n          orderSubmitParam: {\n            remarks: this.remarks,\n          },\n        },\n        callBack: (res) => {\n          console.log(\"res\", res);\n          uni.hideLoading();\n          // this.calWeixinPay(res.orderNumber);\n          this.normalPay(res.orderNumber);\n        },\n      };\n      http.request(params);\n    },\n\n    //模拟支付，直接提交成功\n    normalPay: function (orderNumbers) {\n      uni.showLoading({\n        mask: true,\n      });\n      var params = {\n        url: \"/order/pay/normalPay\",\n        method: \"POST\",\n        data: {\n          orderNumbers: orderNumbers,\n        },\n        callBack: () => {\n            uni.hideLoading();\n\t\t\tuni.showToast({\n\t\t\t  title: \"模拟支付成功\",\n\t\t\t  icon: \"none\",\n\t\t\t});\n\t\t\tsetTimeout(() => {\n\t\t\t  uni.navigateTo({\n\t\t\t\turl:\n\t\t\t\t  \"/pages/pay-result/pay-result?sts=1&orderNumbers=\" +\n\t\t\t\t  orderNumbers,\n\t\t\t  });\n\t\t\t}, 1200);\n        },\n      };\n      http.request(params);\n    },\n\n    /**\n     * 唤起微信支付\n     */\n    calWeixinPay: function (orderNumbers) {\n      uni.showLoading({\n        mask: true,\n      });\n      var params = {\n        url: \"/p/order/pay\",\n        method: \"POST\",\n        data: {\n          payType: 1,\n          orderNumbers: orderNumbers,\n        },\n        callBack: function (res) {\n          uni.hideLoading();\n          uni.requestPayment({\n            timeStamp: res.timeStamp,\n            nonceStr: res.nonceStr,\n            package: res.packageValue,\n            signType: res.signType,\n            paySign: res.paySign,\n            success: (e) => {\n              // console.log(\"支付成功\");\n              uni.navigateTo({\n                url:\n                  \"/pages/pay-result/pay-result?sts=1&orderNumbers=\" +\n                  orderNumbers +\n                  \"&orderType=\" +\n                  this.orderType,\n              });\n            },\n            fail: (err) => {\n              uni.navigateTo({\n                url:\n                  \"/pages/pay-result/pay-result?sts=0&orderNumbers=\" +\n                  orderNumbers +\n                  \"&orderType=\" +\n                  this.orderType,\n              });\n            },\n          });\n        },\n      };\n      http.request(params);\n    },\n    changeCouponSts: function (e) {\n      this.setData({\n        couponSts: e.currentTarget.dataset.sts,\n      });\n    },\n    showCouponPopup: function () {\n      this.setData({\n        popupShow: true,\n      });\n    },\n    closePopup: function () {\n      this.setData({\n        popupShow: false,\n      });\n    },\n\n    /**\n     * 去地址页面\n     */\n    toAddrListPage: function () {\n      uni.navigateTo({\n        url: \"/pages/delivery-address/delivery-address?order=0\",\n      });\n    },\n\n    /**\n     * 确定选择好的优惠券\n     */\n    choosedCoupon: function () {\n      this.loadOrderData();\n      this.setData({\n        popupShow: false,\n      });\n    },\n\n    /**\n     * 优惠券子组件发过来\n     */\n    checkCoupon: function (e) {\n      var ths = this;\n      let index = ths.couponIds.indexOf(e.detail.couponId);\n\n      if (index === -1) {\n        ths.couponIds.push(e.detail.couponId);\n      } else {\n        ths.couponIds.splice(index, 1);\n      }\n    },\n  },\n};\n</script>\n<style>\n@import \"./submit-order.css\";\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit-order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./submit-order.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1701737593998\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Fzhengheci%2Fhlshop%2Fmall4uni%2Fpages%2Fsubmit-order%2Fsubmit-order.vue&module=wxs&lang=wxs\"; export default mod; export * from \"-!../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=%2FUsers%2Fzhengheci%2Fhlshop%2Fmall4uni%2Fpages%2Fsubmit-order%2Fsubmit-order.vue&module=wxs&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}